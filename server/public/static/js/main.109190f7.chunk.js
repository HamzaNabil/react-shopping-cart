(this["webpackJsonpshopping-cart"]=this["webpackJsonpshopping-cart"]||[]).push([[0],{34:function(e,t,c){},35:function(e,t,c){},37:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){},55:function(e,t,c){},56:function(e,t,c){},57:function(e,t,c){},58:function(e,t,c){},59:function(e,t,c){"use strict";c.r(t);var r=c(1),n=c(12),s=c.n(n),i=(c(34),c(35),"Shopping Cart"),a="\xa9 CopyRight HamzaNabil @2021",d="Checkout",j="Name",o=c(0);var l=function(){return Object(o.jsx)("footer",{children:a})};c(37);var u=function(){return Object(o.jsx)("header",{children:i})},b=c(7),O=c(11),h=c(3),f="FETCH_PRODUCTS",x="FILTER_SIZE",p="FILTER_SORT",m="ADD_CART",v="REMOVE_CART",g="CLEAR_CART",N="CREATE_ORDER",C="CLEAR_ORDER",y="FETCH_ORDERS",I=Object(O.b)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return{products:t.data,filterProducts:t.data};case x:return Object(h.a)(Object(h.a)({},e),{},{size:t.data.size,filterProducts:t.data.products});case p:return Object(h.a)(Object(h.a)({},e),{},{sort:t.data.sort,filterProducts:t.data.products});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:JSON.parse(localStorage.getItem("cartItems"))||[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:case v:return{cartItems:t.data.cartItems};case g:return Object(h.a)(Object(h.a)({},e),{},{products:[]});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(h.a)(Object(h.a)({},e),{},{orders:t.data.orders});case N:return{order:t.data.order};case C:return{order:!1};default:return e}}}),S=c(27),E=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||O.c,R=Object(O.d)(I,{},E(Object(O.a)(S.a))),_=c(15),T=c(2),w=c(17),L=c(6);c(43),c(44);function P(e){return Object(o.jsxs)("div",{children:[Object(o.jsxs)("label",{children:[" ",e.label," "]}),Object(o.jsx)("input",{type:e.type,required:!0,name:e.name,onChange:e.onChange})]})}var F=c(28),z=c.n(F);var k=function(e){return Object(o.jsx)(o.Fragment,{children:e.showForm&&Object(o.jsxs)("div",{className:"checkout-form",children:[Object(o.jsx)("span",{className:"close-icon",onClick:function(){return e.setShowForm(!1)},children:" \xd7 "}),Object(o.jsx)(z.a,{left:!0,children:Object(o.jsxs)("form",{onSubmit:e.submitOrder,children:[Object(o.jsx)(P,{label:j,type:"text",name:"name",onChange:e.handleChange}),Object(o.jsx)(P,{label:"Email",type:"email",onChange:e.handleChange,name:"email"}),Object(o.jsx)("div",{children:Object(o.jsxs)("button",{type:"submit",children:[" ",d," "]})})]})})]})})},A=c(18),q=c.n(A),X=c(13),D=c.n(X),M=c(10);var J=function(e){var t=e.order,c=e.closeModal,r=e.cartItems;return Object(o.jsx)(o.Fragment,{children:t&&Object(o.jsx)(D.a,{isOpen:t,onRequestClose:c,children:Object(o.jsxs)("div",{className:"order-info",children:[Object(o.jsx)("span",{className:"close-icon",onClick:c,children:" \xd7 "}),Object(o.jsx)("p",{className:"alert-success",children:" order done success "}),Object(o.jsxs)("table",{children:[Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:"Name:"}),Object(o.jsx)("td",{children:t.name})]}),Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:"Email:"}),Object(o.jsx)("td",{children:t.email})]}),Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:"Total:"}),Object(o.jsx)("td",{children:r.reduce((function(e,t){return e+t.price}),0)})]}),Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:"Selected Items:"}),Object(o.jsx)("td",{children:r.map((function(e){return Object(o.jsxs)("div",{className:"cart-data",children:[Object(o.jsxs)("p",{children:["Number of this products: ",e.qty]}),Object(o.jsxs)("p",{children:["Title of  products: ",e.title]})]})}))})]})]})]})})})};var H=Object(b.b)((function(e){return{order:e.order.order,cartItems:e.cart.cartItems}}),{removeCart:function(e){return function(t,c){var r=c().cart.cartItems,n=Object(M.a)(r).filter((function(t){return t._id!==e._id}));t({type:v,data:{cartItems:n}}),localStorage.setItem("cartItems",JSON.stringify(n))}},createOrder:function(e){return function(t){fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t({type:N,data:{order:e}})})),localStorage.clear("cartItems"),t({type:g})}},clearOrder:function(){return function(e){e({type:C})}}})((function(e){var t=Object(r.useState)(!1),c=Object(L.a)(t,2),n=c[0],s=c[1],i=Object(r.useState)(""),a=Object(L.a)(i,2),d=a[0],j=a[1];return Object(o.jsxs)("div",{className:"cart-wrapper",children:[Object(o.jsxs)("div",{className:"cart-title",children:[" ",0===e.cartItems.length?"Cart Empty":Object(o.jsxs)("p",{children:["There is ",e.cartItems.length," products in cart"]})," "]}),Object(o.jsx)(J,{cartItems:e.cartItems,order:e.order,closeModal:function(){e.clearOrder(),s(!1)}}),Object(o.jsx)(q.a,{bottom:!0,cascade:!0,children:Object(o.jsx)("div",{className:"cart-items",children:e.cartItems.map((function(t){return Object(o.jsxs)("div",{className:"cart-item",children:[Object(o.jsx)("img",{src:t.imageUrl,alt:""}),Object(o.jsxs)("div",{className:"cart-info",children:[Object(o.jsxs)("div",{children:[Object(o.jsxs)("p",{children:[" title ",t.title," "]}),Object(o.jsxs)("p",{children:[" qty: ",t.qty,"  "]}),Object(o.jsxs)("p",{children:[" price: $",t.price," "]})]}),Object(o.jsx)("button",{onClick:function(){return e.removeCart(t)},children:"Remove"})]})]},t.id)}))})}),0!==e.cartItems.length&&Object(o.jsxs)("div",{className:"cart-footer",children:[Object(o.jsxs)("div",{className:"total",children:["Total : $",e.cartItems.reduce((function(e,t){return e+t.price}),0)," "]}),Object(o.jsx)("button",{onClick:function(){return s(!0)},children:" select products "})]}),Object(o.jsx)(k,{showForm:n,submitOrder:function(t){t.preventDefault();var c={name:d.name,email:d.email};e.createOrder(c)},setShowForm:s,handleChange:function(e){j((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(w.a)({},e.target.name,e.target.value))}))}})]})})),U=(c(55),c(29)),$=c.n(U);var V=Object(b.b)((function(e){return{sort:e.products.sort,size:e.products.size,products:e.products.products,filterProducts:e.products.filterProducts}}),{filteredSize:function(e,t){return function(c){var r=Object(M.a)(e).filter((function(e){return-1!=e.sizes.indexOf(t)}));c({type:x,data:{size:t,products:"ALL"==t?e:r}})}},filteredSort:function(e,t){return function(c){var r=Object(M.a)(e).sort((function(e,c){return"lowest"==t?e.price-c.price:"highest"==t?c.price-e.price:e.id<c.id?1:-1}));c({type:p,data:{sort:t,products:r}})}}})((function(e){return Object(o.jsx)($.a,{left:!0,children:e.filterProducts&&Object(o.jsxs)("div",{className:"filter-wrapper",children:[Object(o.jsx)("h2",{className:"filter-title",children:" Filter "}),Object(o.jsxs)("div",{className:"num-of-products",children:[" Number of Products ",e.filterProducts.length," "]}),Object(o.jsxs)("div",{className:"filter-by-size",children:[Object(o.jsx)("span",{children:"Filter"}),Object(o.jsxs)("select",{value:e.size,className:"filter-select",onChange:function(t){return e.filteredSize(e.products,t.target.value)},children:[Object(o.jsx)("option",{value:"ALL",children:"ALL"}),Object(o.jsx)("option",{value:"XS",children:"XS"}),Object(o.jsx)("option",{value:"S",children:"S"}),Object(o.jsx)("option",{value:"M",children:"M"}),Object(o.jsx)("option",{value:"L",children:"L"}),Object(o.jsx)("option",{value:"XL",children:"XL"}),Object(o.jsx)("option",{value:"XXL",children:"XXL"})]})]}),Object(o.jsxs)("div",{className:"filter-by-size",children:[Object(o.jsx)("span",{children:"Order"}),Object(o.jsxs)("select",{className:"filter-select",value:e.sort,onChange:function(t){return e.filteredSort(e.filterProducts,t.target.value)},children:[Object(o.jsx)("option",{value:"latest",children:"Latest"}),Object(o.jsx)("option",{value:"lowest",children:"lowest"}),Object(o.jsx)("option",{value:"highest",children:"Highest"})]})]})]})})}));c(56);var B=function(e){var t=e.product,c=e.closeModal;return Object(o.jsxs)(D.a,{isOpen:t,onRequestClose:c,children:[Object(o.jsx)("span",{className:"close-icon",onClick:c,children:" \xd7 "}),Object(o.jsxs)("div",{className:"product-info",children:[Object(o.jsx)("img",{src:t.imageUrl,alt:t.title}),Object(o.jsxs)("p",{children:[" ",t.title," "]}),Object(o.jsxs)("p",{children:[" ",t.desc]}),Object(o.jsxs)("p",{children:[" $",t.price]})]})]})};var Z=Object(b.b)((function(e){return{products:e.products.filterProducts}}),{fetchProducts:function(){return function(e){fetch("/api/products").then((function(e){return e.json()})).then((function(t){e({type:f,data:t})}))}},addToCart:function(e){return function(t,c){var r=c().cart.cartItems,n=Object(M.a)(r),s=!1;n.forEach((function(t){t._id==e._id&&(t.qty++,s=!0)})),s||n.push(Object(h.a)(Object(h.a)({},e),{},{qty:1})),t({type:m,data:{cartItems:n}}),localStorage.setItem("cartItems",JSON.stringify(n))}}})((function(e){var t=Object(r.useState)(""),c=Object(L.a)(t,2),n=c[0],s=c[1];return Object(r.useEffect)((function(){e.fetchProducts()}),[]),Object(o.jsx)(q.a,{left:!0,cascade:!0,children:Object(o.jsxs)("div",{className:"products-wrapper",children:[e.products&&e.products.length?e.products.map((function(t){return Object(o.jsxs)("div",{className:"product-item",children:[Object(o.jsx)("a",{href:"#",onClick:function(){return function(e){s(e)}(t)},children:Object(o.jsx)("img",{src:t.imageUrl,alt:t.title})}),Object(o.jsxs)("div",{className:"product-desc",children:[Object(o.jsx)("p",{children:t.title}),Object(o.jsxs)("span",{children:["$",t.price]})]}),Object(o.jsx)("button",{onClick:function(){return e.addToCart(t)},children:" Add To Cart "})]},t.id)})):"loading..",Object(o.jsx)(B,{product:n,closeModal:function(){s(!1)}})]})})}));function G(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"wrapper",children:[Object(o.jsx)(Z,{}),Object(o.jsx)(V,{})]}),Object(o.jsx)(H,{})]})}c(57);var K=Object(b.b)((function(e){return{orders:e.order.orders,cartItems:e.cart.cartItems}}),{fetchOrders:function(){return function(e){fetch("/api/orders").then((function(e){return e.json()})).then((function(t){e({type:y,data:{orders:t}})}))}}})((function(e){Object(r.useEffect)((function(){e.fetchOrders()}),[]);var t=e.orders;return Object(o.jsx)("div",{className:"orders",children:Object(o.jsxs)("table",{children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:" id "}),Object(o.jsx)("th",{children:" name "}),Object(o.jsx)("th",{children:" email "}),Object(o.jsx)("th",{children:" items "})]})}),Object(o.jsx)("tbody",{children:t&&t.map((function(t){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:t._id}),Object(o.jsx)("td",{children:t.name}),Object(o.jsx)("td",{children:t.email}),Object(o.jsx)("td",{children:e.cartItems.map((function(e){return Object(o.jsxs)("p",{children:[" ",e.title," , qty: ",e.qty]})}))})]},t._id)}))})]})})}));c(58);function Q(){return Object(o.jsx)("div",{className:"nav",children:Object(o.jsxs)("ul",{children:[Object(o.jsxs)("li",{children:[" ",Object(o.jsx)(_.b,{to:"/",children:"Home"})," "]}),Object(o.jsxs)("li",{children:[" ",Object(o.jsx)(_.b,{to:"/orders",children:"Orders"})," "]})]})})}var W=function(){return Object(o.jsx)(_.a,{children:Object(o.jsx)(b.a,{store:R,children:Object(o.jsxs)("div",{className:"layout",children:[Object(o.jsx)(u,{}),Object(o.jsxs)("main",{children:[Object(o.jsx)(Q,{}),Object(o.jsxs)(T.c,{children:[Object(o.jsx)(T.a,{path:"/",element:Object(o.jsx)(G,{}),exact:!0}),Object(o.jsx)(T.a,{path:"/orders",element:Object(o.jsx)(K,{}),exact:!0})]})]}),Object(o.jsx)(l,{})]})})})};s.a.render(Object(o.jsx)(W,{}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.109190f7.chunk.js.map